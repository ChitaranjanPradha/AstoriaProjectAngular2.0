<div class="sides" translate>
  <h1 translate>Employee Attendance</h1>
  <!-- <div >
    <h1 translate>Title</h1>

    <h6 translate>WelcomeMessage</h6>

    <button (click)="switchLanguage('en')">English</button>

    <button (click)="switchLanguage('es')">Spanish</button>
  </div> -->

  <form [formGroup]="validateForm" style="display: flex; justify-content: center;">
    <table style="width: auto">
      <tr>
        <td>Date</td>
        <td>
          <mat-form-field appearance="fill">
            <mat-label>Choose a date</mat-label>
            <input
              matInput
              [matDatepicker]="date"
              id="date"
              formControlName="date"
              [(ngModel)]="filterDate"
              [max]="maxDate"
              required
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="date"
            ></mat-datepicker-toggle>
            <mat-datepicker #date>
              <mat-datepicker-actions>
                <button mat-button matDatepickerCancel>Cancel</button>
                <button mat-raised-button color="primary" matDatepickerApply>
                  Apply
                </button>
              </mat-datepicker-actions>
            </mat-datepicker>
            <mat-error *ngIf="hasError('date', 'required')"
              >Select Date</mat-error>
          </mat-form-field>
        </td>

        <td>Company</td>
        <td>
          <mat-form-field appearance="fill">
            <mat-label>Select Company</mat-label>
            <mat-select
              id="cmpName"
              formControlName="cmpName"
              [(ngModel)]="cmpId"
              required
            >
              <mat-option
                *ngFor="let company of CmpList"
                [value]="company.companyId"
              >
                {{ company.companyName }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="hasError('cmpName', 'required')"
              >Select Company</mat-error
            >
          </mat-form-field>
        </td>
      </tr>
      <tr>
        <td colspan="4" style="padding-left: 202px">
          <button
            mat-button
            mat-raised-button
            (click)="getAllAttendances()"
            color="primary"
          >
            Load
          </button>
          <button
            style="margin-left: 5px"
            mat-raised-button
            color="primary"
            (click)="save()" [disabled]="disableSaveBtn"
          >
            Save
          </button>
        </td>
      </tr>
    </table>
  </form>

  <div *ngIf="showTable" >
    <mat-form-field fxFlex="40%">
      <input
      matInput
        type="text"
        (keyup)="doFilter($event)"
        placeholder="Filter"/>
    </mat-form-field>

    <table mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="employeeId">
        <th mat-header-cell *matHeaderCellDef>EmployeeId</th>
        <td mat-cell *matCellDef="let element">{{ element.employeeId }}</td>
      </ng-container>

      <ng-container matColumnDef="employeeName">
        <th mat-header-cell *matHeaderCellDef>Employee Name</th>
        <td mat-cell *matCellDef="let element">{{ element.employeeName }}</td>
      </ng-container>

      <ng-container matColumnDef="clockDate">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        <td mat-cell *matCellDef="let element">{{ element.clockDate | date: 'dd-MMM-yyyy' }}</td>
      </ng-container>

      <ng-container matColumnDef="timeIn">
        <th mat-header-cell *matHeaderCellDef>TimeIn</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field floatLabel="never" appearance="outline">
            <input
              type="time"
              matInput
              placeholder="Time In"
              id="timeIn"
              [(ngModel)]="element.timeIn"
            />
          </mat-form-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="timeOut">
        <th mat-header-cell *matHeaderCellDef>TimeOut</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field floatLabel="never" appearance="outline">
            <input
              type="time"
              matInput
              placeholder="Time Out"
              id="timeOut"

              [(ngModel)]="element.timeOut"
            />
          </mat-form-field>
        </td>
      </ng-container>

      <ng-container matColumnDef="remarks">
        <th mat-header-cell *matHeaderCellDef>Remarks</th>
        <td mat-cell *matCellDef="let element">
          <mat-form-field floatLabel="never" appearance="outline">
            <input
              matInput
              placeholder="Remark"
              id="remarks"
              [(ngModel)]="element.remarks"/>
          </mat-form-field>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
    <mat-paginator #paginator [length]=""
              [pageSize]="5"
              [pageSizeOptions]="[5, 10, 15, 20]"
              aria-label="Select page">

    </mat-paginator>
  </div>
</div>
